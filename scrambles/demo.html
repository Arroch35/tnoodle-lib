<html>
<head>
<script>
    window.TNOODLE_ENV = { "TNOODLE_333_MIN_DISTANCE": "1" };
</script>
<script src="war/tnoodlejs/tnoodlejs.nocache.js"></script>
<script>
    function puzzlesLoaded(puzzles) {
        window.puzzles = puzzles;

        var puzzle_select;
        window.addEventListener("load", function() {
            tnoodlejs.setLogLevel("FINEST");

            var gen_scramble_button = document.getElementById("gen_scramble");
            gen_scramble_button.addEventListener("click", newScramble);

            puzzle_select = document.getElementById("puzzle_select");
            for(var shortName in puzzles) {
                var puzzle = puzzles[shortName];
                var longName = puzzle.getLongName();
                puzzle_select.options[puzzle_select.options.length] = new Option(longName, shortName);
            }

            newScramble();
        });
    }

    function newScramble() {
        var puzzle = puzzles[puzzle_select.selectedOptions[0].value];
        var scram = puzzle.generateScramble();
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(document.createTextNode(scram));

        var scramble_image = document.getElementById("scramble_image");
        var preferredSize = puzzle.getPreferredSize();
        scramble_image.width = preferredSize.width_0*2;
        scramble_image.height = preferredSize.height_0*2;
        puzzle.drawScramble(scramble_image, scram, false);
    }

</script>
</head>
<body>
<div>
    <select id="puzzle_select"></select>
    <button id="gen_scramble">New Scramble</button>
</div>
<div>
    <canvas id="scramble_image"></canvas>
</div>
</body>
</html>
