<html>
<head>
<script>
    window.TNOODLE_ENV = { "TNOODLE_333_MIN_DISTANCE": "1" };
</script>
<script src="war/tnoodlejs/tnoodlejs.nocache.js"></script>
<script>
    function puzzlesLoaded(puzzles) {
        window.puzzles = puzzles;

        var puzzle_select;
        window.addEventListener("load", function() {
            var versionSpan = document.getElementById("version");
            versionSpan.appendChild(document.createTextNode(tnoodlejs.getVersion()));
            tnoodlejs.setLogLevel("FINEST");

            var gen_scramble_button = document.getElementById("gen_scramble");
            gen_scramble_button.addEventListener("click", newScramble);

            puzzle_select = document.getElementById("puzzle_select");
            for(var shortName in puzzles) {
                var puzzle = puzzles[shortName];
                var longName = puzzle.getLongName();
                puzzle_select.options[puzzle_select.options.length] = new Option(longName, shortName);
            }

            newScramble();
        });
    }

    function newScramble() {
        var puzzle = puzzles[puzzle_select.selectedOptions[0].value];
        var scram = puzzle.generateScramble();
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(document.createTextNode(scram));


        var maxWidth = 0;
        var maxHeight = 0;
        var svgElement = tnoodlejs.scrambleToSvg(scram, puzzle, maxWidth, maxHeight);

        var scramble_area = document.getElementById("scramble_area");
        scramble_area.innerHTML = "";
        scramble_area.appendChild(svgElement);
    }

</script>
</head>
<body>
<h1>tnoodlejs <span id="version"></span></h1>
<div>
    <select id="puzzle_select"></select>
    <button id="gen_scramble">New Scramble</button>
</div>
<div id="scramble_area">
</div>
</body>
</html>
